package com.bug.free.invention.api;
import com.bug.free.invention.api.controllers.DBConfig;
import org.json.JSONException;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;
import org.junit.jupiter.api.BeforeEach;
import org.skyscreamer.jsonassert.JSONAssert;
import org.junit.runner.RunWith;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.web.client.TestRestTemplate;
import org.springframework.boot.web.server.LocalServerPort;
import org.springframework.http.*;
import org.springframework.test.context.junit4.SpringRunner;

import java.util.Objects;
import java.util.concurrent.Exchanger;


import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertTrue;

@RunWith(SpringRunner.class)
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
public class jobControllerTests {
    @LocalServerPort
    private int port;
    TestRestTemplate restTemplate = new TestRestTemplate();
    HttpHeaders headers = new HttpHeaders();


    @Before
    public void setup() {
        HttpEntity<String> entity = new HttpEntity<String>(null, headers);
        restTemplate.exchange(createURLWithPort("/students"), HttpMethod.POST, entity, String.class);
        System.out.println(DBConfig.TestMode() + DBConfig.url);
    }

    @BeforeEach
    public void EnsureTestMode(){
        DBConfig.TestMode();
    }


    @Test
    public void CanJobSpecBeEditedValidInputs(){
        headers.setContentType(MediaType.APPLICATION_JSON);
        HttpEntity<String> entity = new HttpEntity<String>("{\n" +
                "    \"JobSpec\":\"Test job Input\",\n" +
                "    \"JobID\":23\n" +
                "}", headers);
        ResponseEntity<String> response = restTemplate.exchange(createURLWithPort("/api/jobs/submitJobSpec"),HttpMethod.POST,entity,String.class);
        System.out.println(response);
        String actual = response.getBody();//Objects.requireNonNull(response.getHeaders().get(HttpHeaders.LOCATION)).get(0);
        assertTrue(actual.equals("Submitted"));
    }
    @Test
    public void CanJobSpecBeEditedInValidInputs(){
        headers.setContentType(MediaType.APPLICATION_JSON);
        HttpEntity<String> entity = new HttpEntity<String>("{\n" +
                "    \"JobSpecss\":\";)--Test job Input\",\n" +
                "    \"JobIDs\":23\n" +
                "}", headers);
        ResponseEntity<String> response = restTemplate.exchange(createURLWithPort("/api/jobs/submitJobSpec"),HttpMethod.POST,entity,String.class);
        System.out.println(response);
        String actual = response.getBody();//Objects.requireNonNull(response.getHeaders().get(HttpHeaders.LOCATION)).get(0);
        assertTrue(actual.equals("Unsuccessful String submit")||actual.equals("not submitted"));
    }
    @Test
    public void CanJobSpecBeEditedInValidInputsSpecialCharacters(){
        headers.setContentType(MediaType.APPLICATION_JSON);
        HttpEntity<String> entity = new HttpEntity<String>("{\n" +
                "    \"JobSpec\":\";)--Test job Input\",\n" +
                "    \"JobID\":23\n" +
                "}", headers);
        ResponseEntity<String> response = restTemplate.exchange(createURLWithPort("/api/jobs/submitJobSpec"),HttpMethod.POST,entity,String.class);
        System.out.println(response);
        String actual = response.getBody();//Objects.requireNonNull(response.getHeaders().get(HttpHeaders.LOCATION)).get(0);
        assertTrue(actual.equals("Invalid String"));
    }
    @Test
    public void DoesJobTableReturnData() throws JSONException {
        HttpEntity<String> entity = new HttpEntity<String>(null,headers);
        ResponseEntity<String> response = restTemplate.exchange(createURLWithPort("/api/jobs/jobRoles"),HttpMethod.GET,entity,String.class);
        String actual = response.getBody();
        System.out.println(actual);
        String expected = "[{\"jobID\":1,\"jobTitle\":\"Practise Manager\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Artificial Intelligence/Job profile - Practise Manager (Principal).pdf\",\"jobFamilyID\":1,\"bandID\":1,\"capabilityID\":1},{\"jobID\":2,\"jobTitle\":\"Practise Lead\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Artificial Intelligence/Job profile - Practise Lead (Leadership Community).pdf\",\"jobFamilyID\":1,\"bandID\":1,\"capabilityID\":1},{\"jobID\":3,\"jobTitle\":\"Trainee AI Engineer\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Artificial Intelligence/Job profile - Trainee AI Engineer (Trainee).pdf\",\"jobFamilyID\":2,\"bandID\":1,\"capabilityID\":1},{\"jobID\":4,\"jobTitle\":\"Associate AI Engineer\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Artificial Intelligence/Job profile - Associate AI Engineer (Associate).pdf\",\"jobFamilyID\":2,\"bandID\":1,\"capabilityID\":1},{\"jobID\":5,\"jobTitle\":\"Senior AI Engineer\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Artificial Intelligence/Job profile - Senior AI Engineer (Senior).pdf\",\"jobFamilyID\":2,\"bandID\":1,\"capabilityID\":1},{\"jobID\":6,\"jobTitle\":\"Lead AI Engineer\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Artificial Intelligence/Job profile - Lead AI Engineer (Consultant).pdf\",\"jobFamilyID\":2,\"bandID\":1,\"capabilityID\":1},{\"jobID\":7,\"jobTitle\":\"AI Engineering Manager\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Artificial Intelligence/Job profile - AI Engineering Manager (Manager).pdf\",\"jobFamilyID\":2,\"bandID\":1,\"capabilityID\":1},{\"jobID\":8,\"jobTitle\":\"Principal AI Engineer\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Artificial Intelligence/Job profile - Principal AI Engineer (Principal).pdf\",\"jobFamilyID\":2,\"bandID\":1,\"capabilityID\":1},{\"jobID\":9,\"jobTitle\":\"Trainee Data Scientist\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Artificial Intelligence/Job profile - Trainee Data Scientist (Trainee).pdf\",\"jobFamilyID\":3,\"bandID\":1,\"capabilityID\":1},{\"jobID\":10,\"jobTitle\":\"Associate Data Scientist\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Artificial Intelligence/Job profile - Associate Data Scientist (Associate).pdf\",\"jobFamilyID\":3,\"bandID\":1,\"capabilityID\":1},{\"jobID\":11,\"jobTitle\":\"Senior Data Scientist\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Artificial Intelligence/Job profile - Senior Data Scientist (Senior).pdf\",\"jobFamilyID\":3,\"bandID\":1,\"capabilityID\":1},{\"jobID\":12,\"jobTitle\":\"Consultant Data Scientist\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Artificial Intelligence/Job profile - Consultant Data Scientist (Consultant).pdf\",\"jobFamilyID\":3,\"bandID\":1,\"capabilityID\":1},{\"jobID\":13,\"jobTitle\":\"Data Science Manager\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Artificial Intelligence/Job profile - Data Science Manager (Manager).pdf\",\"jobFamilyID\":3,\"bandID\":1,\"capabilityID\":1},{\"jobID\":14,\"jobTitle\":\"Prinicple Data Scientist\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Artificial Intelligence/Job profile - Prinicple Data Scientist (Principal).pdf\",\"jobFamilyID\":3,\"bandID\":1,\"capabilityID\":1},{\"jobID\":15,\"jobTitle\":\"Global Head of Marketing\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Global Head of Marketing (Leadership Community).pdf\",\"jobFamilyID\":3,\"bandID\":1,\"capabilityID\":1},{\"jobID\":16,\"jobTitle\":\"Businsess Lead Development\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Businsess Lead Development (Leadership Community).pdf\",\"jobFamilyID\":3,\"bandID\":1,\"capabilityID\":1},{\"jobID\":17,\"jobTitle\":\"Account Lead\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Account Lead (Leadership Community).pdf\",\"jobFamilyID\":3,\"bandID\":1,\"capabilityID\":1},{\"jobID\":18,\"jobTitle\":\"Business Development Associate\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Business Development Associate (Associate).pdf\",\"jobFamilyID\":4,\"bandID\":1,\"capabilityID\":1},{\"jobID\":19,\"jobTitle\":\"Senior Business Development Associate\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Senior Business Development Associate (Senior).pdf\",\"jobFamilyID\":4,\"bandID\":1,\"capabilityID\":1},{\"jobID\":20,\"jobTitle\":\"Business Development Consultant\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Business Development Consultant (Consultant).pdf\",\"jobFamilyID\":4,\"bandID\":1,\"capabilityID\":1},{\"jobID\":21,\"jobTitle\":\"Business Development Manager\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Business Development Manager (Manager).pdf\",\"jobFamilyID\":4,\"bandID\":1,\"capabilityID\":1},{\"jobID\":22,\"jobTitle\":\"Business Development Director\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Business Development Director (Principal).pdf\",\"jobFamilyID\":4,\"bandID\":1,\"capabilityID\":1},{\"jobID\":23,\"jobTitle\":\"Customer Success Associate\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Customer Success Associate (Associate).pdf\",\"jobFamilyID\":5,\"bandID\":1,\"capabilityID\":1},{\"jobID\":24,\"jobTitle\":\"Customer Success Consultant\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Customer Success Consultant (Senior).pdf\",\"jobFamilyID\":5,\"bandID\":1,\"capabilityID\":1},{\"jobID\":25,\"jobTitle\":\"Customer Success Manager\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Customer Success Manager (Consultant).pdf\",\"jobFamilyID\":5,\"bandID\":1,\"capabilityID\":1},{\"jobID\":26,\"jobTitle\":\"Customer Success Manager\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Customer Success Manager (Manager).pdf\",\"jobFamilyID\":5,\"bandID\":1,\"capabilityID\":1},{\"jobID\":27,\"jobTitle\":\"Customer Success Director\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Customer Success Director (Principal).pdf\",\"jobFamilyID\":5,\"bandID\":1,\"capabilityID\":1},{\"jobID\":28,\"jobTitle\":\"Cloud Partner Operations Manager\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Partners/Job profile - Cloud Partner Operations Manager (Consultant).pdf\",\"jobFamilyID\":6,\"bandID\":1,\"capabilityID\":1},{\"jobID\":29,\"jobTitle\":\"Partners Consultant\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Partners/Job profile - Partners Consultant (Consultant).pdf\",\"jobFamilyID\":6,\"bandID\":1,\"capabilityID\":1},{\"jobID\":30,\"jobTitle\":\"Partners Relationship Manager\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Partners/Job profile - Partners Relationship Manager (Manager).pdf\",\"jobFamilyID\":6,\"bandID\":1,\"capabilityID\":1},{\"jobID\":31,\"jobTitle\":\"Partners Director\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Partners/Job profile - Partners Director (Principal).pdf\",\"jobFamilyID\":6,\"bandID\":1,\"capabilityID\":1},{\"jobID\":32,\"jobTitle\":\"Senior Bid Production Associate\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Senior Bid Production Associate (Senior).pdf\",\"jobFamilyID\":7,\"bandID\":1,\"capabilityID\":1},{\"jobID\":33,\"jobTitle\":\"Technical Pre-Sales Consultant\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Technical Pre-Sales Consultant (Consultant).pdf\",\"jobFamilyID\":7,\"bandID\":1,\"capabilityID\":1},{\"jobID\":34,\"jobTitle\":\"Bid Production Consultant\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Bid Production Consultant (Consultant).pdf\",\"jobFamilyID\":7,\"bandID\":1,\"capabilityID\":1},{\"jobID\":35,\"jobTitle\":\"Bid Production Manager\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Bid Production Manager (Manager).pdf\",\"jobFamilyID\":7,\"bandID\":1,\"capabilityID\":1},{\"jobID\":36,\"jobTitle\":\"Bid Production Director\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Bid Production Director (Principal).pdf\",\"jobFamilyID\":7,\"bandID\":1,\"capabilityID\":1},{\"jobID\":37,\"jobTitle\":\"Sales Development Representative\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Sales Development Representative (Associate).pdf\",\"jobFamilyID\":8,\"bandID\":1,\"capabilityID\":1},{\"jobID\":38,\"jobTitle\":\"Senior Sales Development Representative\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Senior Sales Development Representative (Senior).pdf\",\"jobFamilyID\":8,\"bandID\":1,\"capabilityID\":1},{\"jobID\":39,\"jobTitle\":\"Sales Development \u200B\u200B\u200B\u200B\u200B\u200B\u200BConsultant\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Sales Development \u200B\u200B\u200B\u200B\u200B\u200B\u200BConsultant (Consultant).pdf\",\"jobFamilyID\":8,\"bandID\":1,\"capabilityID\":1},{\"jobID\":40,\"jobTitle\":\"Sales Development Manager\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Sales Development Manager (Manager).pdf\",\"jobFamilyID\":8,\"bandID\":1,\"capabilityID\":1},{\"jobID\":41,\"jobTitle\":\"Product Demand Generation Director\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Product Demand Generation Director (Principal).pdf\",\"jobFamilyID\":8,\"bandID\":1,\"capabilityID\":1},{\"jobID\":42,\"jobTitle\":\"Marketing Assistant\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Marketing Assistant (Trainee).pdf\",\"jobFamilyID\":9,\"bandID\":1,\"capabilityID\":1},{\"jobID\":43,\"jobTitle\":\"Marketing Associate\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Marketing Associate (Associate).pdf\",\"jobFamilyID\":9,\"bandID\":1,\"capabilityID\":1},{\"jobID\":44,\"jobTitle\":\"Marketing Executive\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Marketing Executive (Senior).pdf\",\"jobFamilyID\":9,\"bandID\":1,\"capabilityID\":1},{\"jobID\":45,\"jobTitle\":\"Senior Marketing Executive\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Senior Marketing Executive (Consultant).pdf\",\"jobFamilyID\":9,\"bandID\":1,\"capabilityID\":1},{\"jobID\":46,\"jobTitle\":\"Marketing Manager\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Marketing Manager (Manager).pdf\",\"jobFamilyID\":9,\"bandID\":1,\"capabilityID\":1},{\"jobID\":47,\"jobTitle\":\"Marketing Director\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Marketing Director (Principal).pdf\",\"jobFamilyID\":9,\"bandID\":1,\"capabilityID\":1},{\"jobID\":48,\"jobTitle\":\"Martech and Ops Assistant\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Martech and Ops Assistant (Trainee).pdf\",\"jobFamilyID\":10,\"bandID\":1,\"capabilityID\":1},{\"jobID\":49,\"jobTitle\":\"Martech and Ops Associate\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Martech and Ops Associate (Associate).pdf\",\"jobFamilyID\":10,\"bandID\":1,\"capabilityID\":1},{\"jobID\":50,\"jobTitle\":\"Martech and Ops Executive\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Martech and Ops Executive (Senior).pdf\",\"jobFamilyID\":10,\"bandID\":1,\"capabilityID\":1},{\"jobID\":51,\"jobTitle\":\"Senior Martech and Ops Executive\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Senior Martech and Ops Executive (Consultant).pdf\",\"jobFamilyID\":10,\"bandID\":1,\"capabilityID\":1},{\"jobID\":52,\"jobTitle\":\"Digital Strategy Manager\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Digital Strategy Manager (Manager).pdf\",\"jobFamilyID\":10,\"bandID\":1,\"capabilityID\":1},{\"jobID\":53,\"jobTitle\":\"Digital Strategy Director\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Business Development and Marketing/Job profile - Digital Strategy Director (Principal).pdf\",\"jobFamilyID\":10,\"bandID\":1,\"capabilityID\":1},{\"jobID\":54,\"jobTitle\":\"Product Consultant\u200B\u200B\u200B\u200B\u200B\u200B\u200B\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Product/Job profile - Product Consultant\u200B\u200B\u200B\u200B\u200B\u200B\u200B (Trainee).pdf\",\"jobFamilyID\":11,\"bandID\":1,\"capabilityID\":1},{\"jobID\":55,\"jobTitle\":\"Product Consultant\u200B\u200B\u200B\u200B\u200B\u200B\u200B\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Product/Job profile - Product Consultant\u200B\u200B\u200B\u200B\u200B\u200B\u200B (Associate).pdf\",\"jobFamilyID\":11,\"bandID\":1,\"capabilityID\":1},{\"jobID\":56,\"jobTitle\":\"Product Consultant\u200B\u200B\u200B\u200B\u200B\u200B\u200B\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Product/Job profile - Product Consultant\u200B\u200B\u200B\u200B\u200B\u200B\u200B (Senior).pdf\",\"jobFamilyID\":11,\"bandID\":1,\"capabilityID\":1},{\"jobID\":57,\"jobTitle\":\"Product Consultant\u200B\u200B\u200B\u200B\u200B\u200B\u200B\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Product/Job profile - Product Consultant\u200B\u200B\u200B\u200B\u200B\u200B\u200B (Consultant).pdf\",\"jobFamilyID\":11,\"bandID\":1,\"capabilityID\":1},{\"jobID\":58,\"jobTitle\":\"Product Consultant\u200B\u200B\u200B\u200B\u200B\u200B\u200B\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Product/Job profile - Product Consultant\u200B\u200B\u200B\u200B\u200B\u200B\u200B (Manager).pdf\",\"jobFamilyID\":11,\"bandID\":1,\"capabilityID\":1},{\"jobID\":59,\"jobTitle\":\"Digital Advisory Consultant\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Product/Job profile - Digital Advisory Consultant (Manager).pdf\",\"jobFamilyID\":12,\"bandID\":1,\"capabilityID\":1},{\"jobID\":60,\"jobTitle\":\"Digital Advisory Consultant\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Product/Job profile - Digital Advisory Consultant (Principal).pdf\",\"jobFamilyID\":12,\"bandID\":1,\"capabilityID\":1},{\"jobID\":61,\"jobTitle\":\"Specialist Consultant\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Product/Job profile - Specialist Consultant (Trainee).pdf\",\"jobFamilyID\":13,\"bandID\":1,\"capabilityID\":1},{\"jobID\":62,\"jobTitle\":\"Specialist Consultant\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Product/Job profile - Specialist Consultant (Associate).pdf\",\"jobFamilyID\":13,\"bandID\":1,\"capabilityID\":1},{\"jobID\":63,\"jobTitle\":\"Specialist Consultant\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Product/Job profile - Specialist Consultant (Senior).pdf\",\"jobFamilyID\":13,\"bandID\":1,\"capabilityID\":1},{\"jobID\":64,\"jobTitle\":\"Specialist Consultant\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Product/Job profile - Specialist Consultant (Consultant).pdf\",\"jobFamilyID\":13,\"bandID\":1,\"capabilityID\":1},{\"jobID\":65,\"jobTitle\":\"Product Consultant\",\"jobSpec\":\"https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Product/Job profile - Product Consultant (Principal).pdf\",\"jobFamilyID\":11,\"bandID\":1,\"capabilityID\":1}]";
        JSONAssert.assertEquals(expected, response.getBody(), false);
    }
    @Test
    public void DoesJobLinkReturnValidInput(){
        HttpEntity<String> entity = new HttpEntity<String>(null,headers);
        ResponseEntity<String> response = restTemplate.exchange(createURLWithPort("/api/jobs/jobSpec?JobID=2"),HttpMethod.GET,entity,String.class);
        String actual = response.getBody();
        System.out.println(actual);
        assertTrue(actual.contains("https://kainossoftwareltd.sharepoint.com/:b:/r/people/Job%20Specifications/Artificial Intelligence/job profile - Practise Lead (Leadership Community).pdf"));

    }
    @Test
    public void DoesJobLinkReturnWhenValueIsGreaterThanTable(){
        HttpEntity<String> entity = new HttpEntity<String>(null,headers);
        ResponseEntity<String> response = restTemplate.exchange(createURLWithPort("/api/jobs/jobSpec?JobID=9999999"),HttpMethod.GET,entity,String.class);
        String actual = response.getBody();
        System.out.println(actual);
        assertTrue(actual.equals("https://www.kainos.com"));

    }
    @Test
    public void DoesJobLinkRejectOnIncorrectData(){
        HttpEntity<String> entity = new HttpEntity<String>(null,headers);
        ResponseEntity<String> response = restTemplate.exchange(createURLWithPort("/api/jobs/jobSpec?JobID=Hellooo"),HttpMethod.GET,entity,String.class);
        int actual = response.getStatusCodeValue();
        assertTrue(actual ==400);

    }

    private String createURLWithPort(String uri) {

        return "http://localhost:" + port + uri;
    }
}
